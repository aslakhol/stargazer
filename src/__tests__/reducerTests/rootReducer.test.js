import rootReducer from '../../reducers/rootReducer';


describe('rootReducer', () => {
  describe('INITIAL_STATE', () => {
    it('is correct', () => {
      const action = { type: 'DUMMY_ACTION' };
      const initialState = {
        currentPage: 0,
        currentPerson: {},
        filter: [],
        modalOpen: false,
        request: {
          count: 0, isFetching: false, query: '', receivedAt: 0, requestedAt: 0, result: [], searchTerm: '',
        },
        sort: { sortBy: 'id', order: 'asc' },
        timeout: -1,
      };

      expect(rootReducer(undefined, action)).toEqual(initialState);
    });
  });

  // The following tests are autogenerated by redux devtools
  // This test would be much better as a snapshot test,
  // but we wanted do demonstrate these kinds of tests.
  describe('autogenerated tests by redux dev tools', () => {
    describe('clicking on R2-D2 card', () => {
      it('correctly updates state', () => {
        let state;
        state = rootReducer({
          currentPerson: {},
          modalOpen: false,
          request: {
            isFetching: false,
            query: 'http://it2810-06.idi.ntnu.no/api/api/people?search=luke&limit=4&offset=0&sortBy=id',
            searchTerm: 'luke',
            requestedAt: 1542373724160,
            count: 1,
            result: [{
              id: 1,
              name: 'Luke Skywalker',
              height: '172',
              mass: '77',
              hair_color: 'blond',
              skin_color: 'fair',
              eye_color: 'blue',
              birth_year: '19BBY',
              gender: 'male',
              homeworld: 1,
              SpeciesId: null,
              Planet: {
                id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
              },
            }],
          },
          timeout: 37,
          filter: [],
          currentPage: 0,
          sort: { sortBy: 'id', order: 'asc' },
        }, {
          type: 'SET_CURRENT_PERSON',
          data: {
            id: 1,
            name: 'Luke Skywalker',
            height: '172',
            mass: '77',
            hair_color: 'blond',
            skin_color: 'fair',
            eye_color: 'blue',
            birth_year: '19BBY',
            gender: 'male',
            homeworld: 1,
            SpeciesId: null,
            Planet: {
              id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
            },
          },
        });
        expect(state).toEqual({
          currentPerson: {
            id: 1,
            name: 'Luke Skywalker',
            height: '172',
            mass: '77',
            hair_color: 'blond',
            skin_color: 'fair',
            eye_color: 'blue',
            birth_year: '19BBY',
            gender: 'male',
            homeworld: 1,
            SpeciesId: null,
            Planet: {
              id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
            },
          },
          modalOpen: false,
          request: {
            isFetching: false,
            query: 'http://it2810-06.idi.ntnu.no/api/api/people?search=luke&limit=4&offset=0&sortBy=id',
            searchTerm: 'luke',
            requestedAt: 1542373724160,
            count: 1,
            result: [{
              id: 1,
              name: 'Luke Skywalker',
              height: '172',
              mass: '77',
              hair_color: 'blond',
              skin_color: 'fair',
              eye_color: 'blue',
              birth_year: '19BBY',
              gender: 'male',
              homeworld: 1,
              SpeciesId: null,
              Planet: {
                id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
              },
            }],
          },
          timeout: 37,
          filter: [],
          currentPage: 0,
          sort: { sortBy: 'id', order: 'asc' },
        });
        state = rootReducer({
          currentPerson: {
            id: 1,
            name: 'Luke Skywalker',
            height: '172',
            mass: '77',
            hair_color: 'blond',
            skin_color: 'fair',
            eye_color: 'blue',
            birth_year: '19BBY',
            gender: 'male',
            homeworld: 1,
            SpeciesId: null,
            Planet: {
              id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
            },
          },
          modalOpen: false,
          request: {
            isFetching: false,
            query: 'http://it2810-06.idi.ntnu.no/api/api/people?search=luke&limit=4&offset=0&sortBy=id',
            searchTerm: 'luke',
            requestedAt: 1542373724160,
            count: 1,
            result: [{
              id: 1,
              name: 'Luke Skywalker',
              height: '172',
              mass: '77',
              hair_color: 'blond',
              skin_color: 'fair',
              eye_color: 'blue',
              birth_year: '19BBY',
              gender: 'male',
              homeworld: 1,
              SpeciesId: null,
              Planet: {
                id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
              },
            }],
          },
          timeout: 37,
          filter: [],
          currentPage: 0,
          sort: { sortBy: 'id', order: 'asc' },
        }, { type: 'OPEN_MODAL' });
        expect(state).toEqual({
          currentPerson: {
            id: 1,
            name: 'Luke Skywalker',
            height: '172',
            mass: '77',
            hair_color: 'blond',
            skin_color: 'fair',
            eye_color: 'blue',
            birth_year: '19BBY',
            gender: 'male',
            homeworld: 1,
            SpeciesId: null,
            Planet: {
              id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
            },
          },
          modalOpen: true,
          request: {
            isFetching: false,
            query: 'http://it2810-06.idi.ntnu.no/api/api/people?search=luke&limit=4&offset=0&sortBy=id',
            searchTerm: 'luke',
            requestedAt: 1542373724160,
            count: 1,
            result: [{
              id: 1,
              name: 'Luke Skywalker',
              height: '172',
              mass: '77',
              hair_color: 'blond',
              skin_color: 'fair',
              eye_color: 'blue',
              birth_year: '19BBY',
              gender: 'male',
              homeworld: 1,
              SpeciesId: null,
              Planet: {
                id: 1, climate: 'arid', surface_water: '1', name: 'Tatooine', diameter: '10465', rotation_period: '23', terrain: 'desert', gravity: '1 standard', orbital_period: '304', population: '200000',
              },
            }],
          },
          timeout: 37,
          filter: [],
          currentPage: 0,
          sort: { sortBy: 'id', order: 'asc' },
        });
      });
    });
  });
});
